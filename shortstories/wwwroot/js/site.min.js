import Home from"./Home.js";import Register from"./Register.js";import Login from"./Login.js";import Header from"./Header.js";import Profile from"./Profile.js";import Story from"./Story.js";import EditStory from"./EditStory.js";import Settings from"./Settings.js";const pageLoadFunction=()=>{const t=new Home;t.homePage!==null&&(t.getStoriesByFollowers(window.localStorage.getItem("pid"),"home-follower-stories"),t.getStoriesByFilter("New","home-filter-stories"),t.addMainDropdownButtonEventListener(),t.addAllDropdownButtonEventListeners());const f=new Register;f.addFormEventListener();f.changeChosenAvatar();const e=new Login;e.addFormEventListener();const r=new Header;r.checkAuthorizationState().then(n=>{n&&(document.getElementsByClassName("header-unauthenticated")[0].style.display="none",document.getElementById("header-username").innerHTML=n,document.getElementsByClassName("header-authenticated")[0].style.display="block",r.logoutEventListener(),r.setAvatar(),r.setProfileLink(),r.setSettingsLink())}).catch(()=>{});const i=new Profile;i.profileViewId!=null&&(window.localStorage.getItem("pid")!==null?(i.followButtonAddEventListeners(),i.unfollowButtonAddEventListners(),i.checkIfUserIsAFriend()):i.hideButtons(),i.displayProfileAvatar(),t.getStoriesByProfile(document.getElementById("profile-username").innerHTML,"profile-stories"));const o=new Story,u=new EditStory;u.editStoryPage!==null&&(u.getStoryDetails(document.getElementById("edit-story-id").value).then(()=>{u.updateStoryButtonFunctionality()}).catch(()=>{}),u.updateSelectedGenresFunctionality(),u.switchingBetweenStoryAndChapterSelection());const n=new Settings;document.getElementById("main-container").addEventListener("click",t=>{t.target.id!=="settings-update-user-button"&&n.hideCurrentLoginDetailsPrompt()});n.settingsPage!==null&&(n.preSelectCurrentAvatar(),n.preSelectCurrentWriterLabel(),n.preFillProfileDescription(),n.displayCurrentStories(),n.updateUserButtonEventListeners(),n.updateProfileButtonEventListeners())};window.addEventListener("DOMContentLoaded",()=>{pageLoadFunction()});